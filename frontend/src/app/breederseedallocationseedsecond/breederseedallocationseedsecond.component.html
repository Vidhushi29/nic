<form [formGroup]="formSuperGroup" (ngSubmit)="submitForm(formSuperGroup.value)">
	<div class="row my-4 w-100 mx-0 form-child">
		<div class="col-12 px-md-3 px-sm-3 px-0">
			<div class="row mx-auto main-content-form-wrapper py-2">

				<div class="col-12"
					style="letter-spacing: 0px;color: #000000 !important; font-style: normal Poppins; font-weight: bold;font-size : 20px">
					Allocation of Breeder Seed to SPAs for Lifting Second
				</div>

				<div class="col-12 px-1 mt-3">
					<app-dynamic-fields [fieldsList]="fieldsList" [isLabelControlParallel]="false"
						[formGroup]="IstPartFormGroup" [isView]="isView"></app-dynamic-fields>
				</div>



				<div class="col-sm-6 col-12 mt-4" style="display: inline-flex;">
					<div class="resp_btn">
						<a href="javascript:void(0)" (click)="search()"
							class="form-button submit_btn d-inline-flex justify-content-center verticle-content-middle mb-3">
							Search
						</a>
					</div>
					<div class="resp_btn">
						<a href="javascript:void(0)"
							class="form-button submit_btn ml-3 d-inline-flex justify-content-center verticle-content-middle mb-3 mr-1"
							(click)="clear()">
							Clear
						</a>
					</div>
				</div>

				<div class="col-sm-6 col-12 mt-4" style="text-align: right;">
					<div *ngIf="items.length" class="resp_btn">
						<a href="javascript:void(0)"
							class="form-button submit_btn ml-3 d-inline-flex justify-content-center verticle-content-middle mb-3 mr-1"
							(click)="exportexcel()">
							<img src="assets\icons\icons8-excel_white.svg" alt="" width="20px" alt=""> &nbsp;
							Excel
						</a>
					</div>
				</div>



				<!-- <div class="resp_btn">
					<a href="javascript:void(0)" (click)="exportexcel()"><img src="assets\icons\excel.jpg" alt="" width="20px" alt=""> Excel</a>
				</div> -->
				<table *ngIf="items.length" class="table table-bordered table-responsive" id="excel-table"
					style="display:none">
					<thead>
						<tr>
							<th> <b>Year of indent: {{reportHeader && reportHeader['year'] ?
									reportHeader['year']+'-'+(reportHeader['year']-1999) :
									'NA'}}</b></th>
							<th><b>Season: {{reportHeader && reportHeader['season'] ? (reportHeader['season'] =='R' ?
									'Rabi':'Kharif' ) : 'NA'}}</b></th>
							<th> <b>Crop: {{reportHeader && reportHeader['crop_name'] ? reportHeader['crop_name'] :
									'NA'}}</b></th>
						</tr>
						<tr class="data-row-header">
							<th scope="col" class="col-md-1 py-2">S/N</th>
							<th scope="col" class="col-md-3 py-2">Variety</th>
							<th scope="col" class="col-md-3 py-2">Notification Year</th>
							<th scope="col" class="col-md-2 py-2">I/A</th>
							<!-- <ng-container
								*ngFor="let indentQuntityData of items[0].indenter;let indenterindex = index ">
								<th scope="col" class="col-md-2 py-2">I{{indenterindex+1}}</th>
							</ng-container> -->
							<ng-container
								*ngFor="let indentQuntityData of items[0].indenter;let indenterindex = index ">
								<th scope="col" class="col-md-2 py-2" title="{{indentQuntityData.full_name}}">
									{{indentQuntityData.name}}</th>
							</ng-container>
							<th scope="col" class="col-md-2 py-2">Total</th>
							<th scope="col" class="col-md-2 py-2">BSPC</th>
							<th scope="col" class="col-md-2 py-2">Total Produced</th>
							<th scope="col" class="col-md-2 py-2">Surplus/Dificit</th>
						</tr>
					</thead>
					<tbody>
						<!-- <ng-container *ngFor="let data of items; let cropIndex = index"> -->
						<ng-container *ngFor="let varietyData of items; let varietyIndex = index">
							<!-- <ng-container *ngFor="let spaData of varietyData.spas; let spaIndex = index"> -->
							<!-- <tr>
								<td *ngIf="varietyIndex === 0||1" [attr.rowspan]="varietyData.allocation.length+3">{{
									varietyIndex + 1 }}</td>
								<td *ngIf="varietyIndex === 0||1" [attr.rowspan]="varietyData.allocation.length+3">{{
									varietyData.variety_name ? varietyData.variety_name : 'NA' }}</td>
								<td *ngIf="varietyIndex === 0||1" [attr.rowspan]="varietyData.allocation.length+3">{{
									varietyData.notification_year? varietyData.notification_year : 'NA' }}</td>
								<th scope="col" class="col-md-2 py-2"></th>
								<ng-container *ngFor="let indenterData of varietyData.indenter; let spaIndex = index">
									<th scope="col" class="col-md-2 py-2" title="{{indenterData.full_name}}">
										{{indenterData.name}}</th>
								</ng-container>
								<th scope="col" class="col-md-2 py-2"></th>
								<th scope="col" class="col-md-2 py-2"></th>
								<th scope="col" class="col-md-2 py-2"></th>
								<td *ngIf="varietyIndex === 0 || 1" [attr.rowspan]="varietyData.allocation.length+3">{{
									varietyData.surplus_dificit? varietyData.surplus_dificit : 0 }}</td>
							</tr>
							<tr>
								<th scope="col" class="col-md-2 py-2">I</th>
								<ng-container *ngFor="let indentQuntityData of varietyData.indent_quantity; ">
									<td scope="col" class="col-md-2 py-2">{{indentQuntityData.indent_quantity}}</td>
								</ng-container>
							</tr> -->
							<tr>
								<td *ngIf="varietyIndex === 0||1"
									[attr.rowspan]="varietyData.allocation.length ? varietyData.allocation.length+2 : 3">
									{{
									varietyIndex + 1 }}</td>
								<td *ngIf="varietyIndex === 0||1"
									[attr.rowspan]="varietyData.allocation.length ? varietyData.allocation.length+2 : 3">
									{{
									varietyData.variety_name ? varietyData.variety_name : 'NA' }}</td>
								<td *ngIf="varietyIndex === 0||1"
									[attr.rowspan]="varietyData.allocation.length ? varietyData.allocation.length+2 : 3">
									{{
									varietyData.notification_year? varietyData.notification_year : 'NA' }}</td>

								<th scope="col" class="col-md-2 py-2">I</th>
								<ng-container *ngFor="let indentQuntityData of varietyData.indent_quantity; ">
									<td scope="col" class="col-md-2 py-2">{{indentQuntityData.indent_quantity | number :
										'1.2-2'}}</td>
								</ng-container>
								<th scope="col" class="col-md-2 py-2"></th>
								<th scope="col" class="col-md-2 py-2"></th>
								<td *ngIf="varietyIndex === 0 || 1"
									[attr.rowspan]="varietyData.allocation.length ? varietyData.allocation.length+2 : 3">
									{{
									varietyData.surplus_dificit | number : '1.2-2'}}</td>
							</tr>
							<ng-container *ngIf="varietyData.allocation.length">
								<ng-container *ngFor="let allocationData of varietyData.allocation;">
									<tr>
										<th scope="col" class="col-md-2 py-2">A</th>
										<ng-container *ngFor="let value of allocationData.quantity;">
											<td scope="col" class="col-md-2 py-2">{{value}}</td>
										</ng-container>
										<td scope="col" class="col-md-2 py-2">{{ allocationData.total_quantity | number
											: '1.2-2'}}</td>
										<td scope="col" class="col-md-2 py-2">{{allocationData.bspc_name}}</td>
										<td scope="col" class="col-md-2 py-2">{{ allocationData.bspc_produced | number :
											'1.2-2'}}</td>
									</tr>
								</ng-container>
							</ng-container>
							<ng-container *ngIf="!varietyData.allocation.length">
								<tr>
									<th scope="col" class="col-md-2 py-2">A</th>
									<ng-container *ngFor="let indentQuntityData of varietyData.indent_quantity; ">
										<td scope="col" class="col-md-2 py-2"></td>
									</ng-container>
									<!-- <td scope="col" class="col-md-2 py-2"></td> -->
									<td scope="col" class="col-md-2 py-2">No Production</td>
									<td scope="col" class="col-md-2 py-2"></td>
								</tr>
							</ng-container>
							<tr>
								<th scope="col" class="col-md-2 py-2">Total Allocation</th>
								<ng-container *ngFor="let totalAllocationData of varietyData.total_allocation; ">
									<th scope="col" class="col-md-2 py-2">{{totalAllocationData.total_allocation |
										number : '1.2-2'}}</th>
								</ng-container>
							</tr>
						</ng-container>
						<tr>
							<th></th>
							<th scope="col" rowspan="2" class="col-md-2 py-2">Grand Total</th>
							<th></th>
							<th scope="col" class="col-md-2 py-2">I</th>

							<ng-container *ngFor="let totalAllocationData1 of grandIndent; ">
								<th scope="col" class="col-md-2 py-2">{{totalAllocationData1.indent_quantity | number :
									'1.2-2'}}</th>
							</ng-container>
							<th></th>
							<th></th>
							<th></th>
						</tr>
						<tr>
							<th></th>
							<th></th>
							<th scope="col" class="col-md-2 py-2">A</th>
							<ng-container *ngFor="let totalAllocationData1 of grandAllocation; ">
								<th scope="col" class="col-md-2 py-2">{{totalAllocationData1.total_allocation | number :
									'1.2-2'}}</th>
							</ng-container>
							<th></th>
							<th>{{grandTotalProduction | number : '1.2-2'}}</th>
							<th>{{totalDificit| number : '1.2-2'}}</th>
						</tr>
					</tbody>
				</table>
				<ng-template #noVarietyData>
					<div *ngIf="!items.length" style="text-align: center; width: 100%;">
						<p class="my-2 mx-auto">No Data Found</p>
					</div>
				</ng-template>

				<div class="col-12 mt-1" *ngIf="upperRowDisplay">
					<div class="row px-2">
						<div class="col-sm-6 col-12">
							<label class="bold-label ">Total Number of Variety :
								{{verietyListDetails.totalNumberOfVariety ?
								verietyListDetails.totalNumberOfVariety : 'N/A' }}</label>
						</div>
						<div class="col-sm-6 col-12" style="text-align: right;">
							<label class="bold-label">Total Indenting Quantity :
								{{verietyListDetails.totalIndentQuantity ?
								getQuantityOfSeedProduced(verietyListDetails.totalIndentQuantity) : 'N/A' }} {{
								searhedData && IstPartFormGroupControls['cropName'].value &&
								IstPartFormGroupControls['cropName'].value.value ?
								getQuantityMeasure(IstPartFormGroupControls['cropName'].value.value):''}}

							</label>
						</div>
					</div>

					<div class="row px-2">
						<div class="col-sm-6 col-12">
							<label class="bold-label">Total Production Quantity :
								{{verietyListDetails.totalAllocationQuantity ?
								getQuantityOfSeedProduced(verietyListDetails.totalAllocationQuantity) : 'N/A' }}
								{{
								searhedData && IstPartFormGroupControls['cropName'].value &&
								IstPartFormGroupControls['cropName'].value.value ?
								getQuantityMeasure(IstPartFormGroupControls['cropName'].value.value):''}}

							</label>
						</div>
						<div class="col-sm-6 col-12" style="text-align: right;">
							<label class="bold-label">
								Total Allocation Quantity : {{getQuantityOfSeedProduced(totalAllocationQuantity) ?? '0'}}
								{{
								searhedData && IstPartFormGroupControls['cropName'].value &&
								IstPartFormGroupControls['cropName'].value.value ?
								getQuantityMeasure(IstPartFormGroupControls['cropName'].value.value):''}}

							</label>
						</div>
					</div>
				</div>


				<div class="col-12 mt-1" *ngIf="varietyDataload">
					<div class="row">
						<div class="col-4" *ngIf="!isCropSubmitted">
							<form [formGroup]="varietyForm">

								<ng-multiselect-dropdown class="seed-division-variety" formControlName="variety_id"
									[placeholder]="'Select Variety'" [settings]="dropdownSettings"
									(onSelect)="onSelectVariety($event)"
									[data]="varietyDropdownDatasecond"></ng-multiselect-dropdown>

							</form>
						</div>

						<div class="col-4"
							*ngIf="!isCropSubmitted && editVarietyDropdown && editVarietyDropdown.length > 0">
							<form [formGroup]="editVarietyForm">
								<ng-multiselect-dropdown class="seed-division-variety" formControlName="variety_id"
									[placeholder]="'Select Variety for Edit'" [settings]="dropdownSettings"
									(onSelect)="onSelectEditVariety($event)" [data]="editVarietyDropdown">
								</ng-multiselect-dropdown>
							</form>
						</div>
					</div>

					<div class="row" *ngIf="selectedVerietyDetail">
						<div class="col-12 mt-2 pr-0 pl-2">
							<div class="row mx-1 aloc_breeder_padding mt-3 p-1">
								<div class="col-3 px-2">
									<label class="bold-label">Total Indenting Quantity :
										{{selectedVerietyDetail && selectedVerietyDetail.totalIndentQuantity ?
										getQuantityOfSeedProduced(selectedVerietyDetail.totalIndentQuantity) : 'N/A' }}

									</label>
								</div>
								<div class="col-3 px-2">
									<label class="bold-label">Total Production :
										{{selectedVerietyDetail && selectedVerietyDetail.totalAllocationQuantity ?
										getQuantityOfSeedProduced(selectedVerietyDetail.totalAllocationQuantity) : 'N/A'
										}}

									</label>
								</div>

								<div class="col-3 pl-2">
									<label class="bold-label">Production Percentage :
										{{getQuantityOfSeedProduced(productionPercentage) || '0'}}
									</label>
								</div>

								<div class="col-3 pl-2">
									<label class="bold-label">Quantity Unit : {{
										searhedData && IstPartFormGroupControls['cropName'].value &&
										IstPartFormGroupControls['cropName'].value.value ?
										getQuantityMeasure(IstPartFormGroupControls['cropName'].value.value):''}}
									</label>
								</div>
							</div>
						</div>
					</div>

					<div class="row" *ngIf="selectedVerietyDetail">
						<div class="col">
							<div class="table-responsive">
								<table class="table">
									<thead class="thead">
										<tr>
											<td scope="col" style="font-weight: 600;">Name of BSPCs</td>
											<td class="bspcName" scope="col" style="font-weight: 600;"
												*ngFor="let data of selectedVerietyDetail.productionCenters; let dataIndex=index">
												{{data.user.name}}</td>
										</tr>
									</thead>

									<tbody>
										<tr>
											<th scope="row">
												Quantity Produced
											</th>
											<th class="bspcName" scope="col"
												*ngFor="let data of selectedVerietyDetail.productionCenters; let dataIndex=index">
												{{getQuantityOfSeedProduced(data.quantityProduced)}}
											</th>

										</tr>
										<tr>
											<th scope="row">
												Quantity Allocated
											</th>
											<th class="bspcName" scope="col"
												*ngFor="let data of selectedVerietyDetail.productionCenters; let dataIndex=index">
												{{getQuantityOfSeedProduced(data.quantityAllocated)}}
											</th>
										</tr>
										<tr>
											<th scope="row">
												Quantity Left
											</th>
											<th class="bspcName" scope="col"
												*ngFor="let data of selectedVerietyDetail.productionCenters; let dataIndex=index">
												{{data && data.quantityProduced && data.quantityAllocated &&
												((data.quantityProduced - data.quantityAllocated) < 0 ) ? 0 :
													getQuantityOfSeedProduced(data.quantityProduced -
													data.quantityAllocated)}} </th>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>

					<div class="row" *ngIf="selectedVerietyDetail">
						<div class="col">
							<div class="table-responsive">
								<table class="table">
									<thead class="thead">
										<tr>
											<th scope="col" class="text-center indenterName">Name of Indenters</th>
											<th scope="col" class="text-center indentorQuantity">Indented Quantity</th>
											<th scope="col" class="text-center allocationQuantity">Allocation for
												Lifting</th>
											<th scope="col" class="text-center indentorQuantity">Allocated Quantity</th>
											<th scope="col" class="text-center indentorQuantity">Quantity Left for
												Allocation</th>
											<th scope="col" class="text-center indentorQuantity">Action</th>

										</tr>
									</thead>

									<tbody>
										<tr *ngIf="indentorLoad && indentors && indentors.length > 0">
											<td>
												<form [formGroup]="tempForm">
													<ng-multiselect-dropdown class="seed-division-variety"
														formControlName="selectedIndentorModel"
														[placeholder]="'Select Indentor'" [settings]="dropdownSettings"
														(onSelect)="onSelectIndentor($event)" [data]="indentors">
													</ng-multiselect-dropdown>
												</form>

											</td>

											<td class="text-center">
												{{selectedIndentor && selectedIndentor.indent_quantity &&
												getQuantityOfSeedProduced(selectedIndentor.indent_quantity) || 0}}
												/
												{{selectedIndentor && selectedIndentor.indent_quantity &&
												getPercentage(selectedIndentor.indent_quantity) || 0}}
											</td>
											<td class="text-center m-p-0">
												<table class="table table-bordered">
													<tbody *ngIf="selectedIndentor && selectedIndentor.productions">
														<tr
															*ngFor="let production of selectedIndentor.productions; let productionIndex = index">
															<td style="min-width: 150px;">

																{{production.name || 'N/A'}}
															</td>
															<td style="min-width: 150px;">
																<!-- <form [formGroup]="inputForm"> -->
																<input #tempInput class="qty-txt" type="text"
																	name="quantityInputBox"
																	(keypress)="isNumberKey($event)" step="00.01"
																	(keyup)="qtyChanged($event, production)"
																	[(value)]="production.quantity">
																<!-- </form> -->

															</td>

														</tr>

													</tbody>
												</table>
											</td>

											<td class="text-center">
												{{selectedIndentor && selectedIndentor.allocated_quantity &&
												getQuantityOfSeedProduced(selectedIndentor.allocated_quantity)}}
											</td>
											<td class="text-center">
												{{selectedIndentor && selectedIndentor.quantity_left_for_allocation &&
												getQuantityOfSeedProduced(selectedIndentor.quantity_left_for_allocation)}}
											</td>

											<td class="tex-center">
												<div class="resp_btn">
													<a href="javascript:void(0)"
														class="form-button submit_btn ml-3 d-inline-flex justify-content-center verticle-content-middle mb-3 mr-1"
														(click)="submitData(selectedIndentor)">
														Submit
													</a>
												</div>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>

					<hr>

					<!-- <div class="row my-2" *ngIf="dataToShow && dataToShow.length > 0">
						<div class="col">
							<div class="row mb-2" *ngIf="editVarietyDropdown && editVarietyDropdown.length > 0">
								<div class="col-sm-4" *ngIf="!isCropSubmitted">
									<form [formGroup]="editVarietyForm">
										<ng-multiselect-dropdown class="seed-division-variety"
											formControlName="variety_id" [placeholder]="'Select Variety for Edit'"
											[settings]="dropdownSettings" (onSelect)="onSelectEditVariety($event)"
											[data]="editVarietyDropdown">
										</ng-multiselect-dropdown>
									</form>
								</div>
							</div>

							<div class="row" *ngIf="editSelectedVariety">
								<div class="col">
									<div class="table-responsive">
										<table class="table">
											<thead class="thead">
												<tr>
													<td scope="col" style="font-weight: 600;">Name of BSPCs</td>
													<td class="bspcName" scope="col" style="font-weight: 600;"
														*ngFor="let data of editSelectedVariety.productionCenters; let dataIndex=index">
														{{data.user.name}}</td>
												</tr>
											</thead>

											<tbody>
												<tr>
													<th scope="row">
														Quantity Produced
													</th>
													<th class="bspcName" scope="col"
														*ngFor="let data of editSelectedVariety.productionCenters; let dataIndex=index">
														{{getQuantityOfSeedProduced(data.quantityProduced)}}
													</th>

												</tr>
												<tr>
													<th scope="row">
														Quantity Allocated
													</th>
													<th class="bspcName" scope="col"
														*ngFor="let data of editSelectedVariety.productionCenters; let dataIndex=index">
														{{getQuantityOfSeedProduced(data.quantityAllocated)}}
													</th>
												</tr>
												<tr>
													<th scope="row">
														Quantity Left
													</th>
													<th class="bspcName" scope="col"
														*ngFor="let data of editSelectedVariety.productionCenters; let dataIndex=index">
														{{data && data.quantityProduced && data.quantityAllocated &&
														((data.quantityProduced - data.quantityAllocated) < 0 ) ? 0 :
															getQuantityOfSeedProduced(data.quantityProduced -
															data.quantityAllocated)}} </th>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>

							<div class="row" *ngIf="editSelectedVariety">
								<div class="col">
									<div class="table-responsive">
										<table class="table">
											<thead class="thead">
												<tr>
													<th scope="col" class="text-center indenterName">Name of Indenters
													</th>
													<th scope="col" class="text-center indentorQuantity">Indented
														Quantity</th>
													<th scope="col" class="text-center allocationQuantity">Allocation
														for
														Lifting</th>
													<th scope="col" class="text-center indentorQuantity">Allocated
														Quantity</th>
													<th scope="col" class="text-center indentorQuantity">Quantity Left
														for
														Allocation</th>
													<th scope="col" class="text-center indentorQuantity">Action</th>

												</tr>
											</thead>

											<tbody>
												<tr>
													<td>
														<form [formGroup]="editTempForm">
															<ng-multiselect-dropdown class="seed-division-variety"
																formControlName="selectedIndentorModel"
																[placeholder]="'Select Indentor'"
																[settings]="dropdownSettings"
																(onSelect)="onEditIndentor($event)"
																[data]="editSelectedVariety.indenter">
															</ng-multiselect-dropdown>
														</form>

													</td>

													<td class="text-center">
														{{editSelectedIndentor && editSelectedIndentor.indent_quantity
														&&
														getQuantityOfSeedProduced(editSelectedIndentor.indent_quantity)
														|| 0}}
														/
														{{editSelectedIndentor && editSelectedIndentor.indent_quantity
														&&
														getPercentage(editSelectedIndentor.indent_quantity) || 0}}
													</td>
													<td class="text-center m-p-0">
														<table class="table table-bordered">
															<tbody
																*ngIf="editSelectedIndentor && editSelectedIndentor.productions">
																<tr
																	*ngFor="let production of editSelectedIndentor.productions; let productionIndex = index">
																	<td style="min-width: 150px;">{{production.name ||
																		'N/A'}}
																	</td>
																	<td style="min-width: 150px;">
																		<div>
																			<input class="qty-txt" type="text"
																				(keypress)="isNumberKey($event)"
																				step="0.01"
																				(keyup)="editQtyChanged($event, production, productionIndex)"
																				[(value)]="production.quantity">
																		</div>

																	</td>

																</tr>

															</tbody>
														</table>
													</td>

													<td class="text-center">
														{{editSelectedIndentor &&
														editSelectedIndentor.allocated_quantity &&
														getQuantityOfSeedProduced(editSelectedIndentor.allocated_quantity)}}
													</td>
													<td class="text-center">
														{{editSelectedIndentor &&
														editSelectedIndentor.quantity_left_for_allocation &&
														getQuantityOfSeedProduced(editSelectedIndentor.quantity_left_for_allocation)}}
													</td>

													<td class="tex-center">
														<div class="resp_btn">
															<a href="javascript:void(0)"
																class="form-button submit_btn ml-3 d-inline-flex justify-content-center verticle-content-middle mb-3 mr-1"
																(click)="updateVarietyData(editSelectedIndentor)">
																Update
															</a>
														</div>
														<div class="resp_btn">
															<a href="javascript:void(0)"
																class="form-button submit_btn ml-3 d-inline-flex justify-content-center verticle-content-middle mb-3 mr-1"
																(click)="cancelVarietyData(selectedIndentor)">

																Cancel
															</a>
														</div>
													</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div> -->



					<div class="row">
						<div class="col" *ngIf="dataToDisplay && dataToDisplay.length > 0">
							<div class="table-responsive">
								<table class="table table-bordered">
									<thead class="thead">
										<tr>
											<th scope="col" class="text-center">Variety Name</th>
											<th scope="col" class="text-center">Name of Indenters</th>
											<th scope="col" class="text-center">Indented Quantity</th>
											<th scope="col" class="text-center">Name of BSPC</th>
											<th scope="col" class="text-center">Allocated Quantity of BSPC</th>
											<th scope="col" class="text-center">Total Allocated Quantity</th>
											<th scope="col" class="text-center">Quantity Left for Allocation</th>
											<!-- <th scope="col" class="text-center">Action</th> -->

										</tr>
									</thead>
									<tbody>


										<ng-container>
											<ng-container *ngFor="let data of dataToDisplay; let cropIndex = index">
												<ng-container
													*ngFor="let varietyData of data.indentors; let varietyIndex = index">
													<ng-container
														*ngFor="let spaData of varietyData.productions; let spaIndex = index">
														<tr>
															<td *ngIf="spaIndex === 0 && varietyIndex === 0"
																[attr.rowspan]="data.totalVarietyLength">
																{{data && data.variety_id ?
																getVarietyName(data.variety_id)
																: 'NA'}}

															</td>
															<td class="text-center" *ngIf="spaIndex === 0"
																[attr.rowspan]="varietyData.totalProductionlength">
																{{varietyData && varietyData.name ? varietyData.name :
																'NA'}}

															</td>
															<td class="text-center" *ngIf="spaIndex === 0"
																[attr.rowspan]="varietyData.totalProductionlength">
																{{getQuantityOfSeedProduced(varietyData.indent_quantity)
																||
																'0'}}

															</td>
															<td *ngIf="spaData">
																{{spaData.name || '0'}}
															</td>
															<td *ngIf="spaData">
																{{getQuantityOfSeedProduced(spaData.quantity) || '0'}}
															</td>
															<td *ngIf="spaIndex === 0"
																[attr.rowspan]="varietyData.totalProductionlength">

																{{getQuantityOfSeedProduced(varietyData.allocated_quantity)
																|| '0'}}
															</td>
															<td *ngIf="spaIndex === 0"
																[attr.rowspan]="varietyData.totalProductionlength">
																{{getQuantityOfSeedProduced(varietyData.quantity_left_for_allocation)
																|| '0'}}
															</td>


														</tr>
													</ng-container>
												</ng-container>

											</ng-container>
										</ng-container>

									</tbody>

									<tr *ngIf="totalData" style="font-weight: 700;">
										<td>
											{{totalData.name}}
										</td>
										<td></td>
										<td class="text-center">
											{{getQuantityOfSeedProduced(totalData.indent_quantity) ?? '0'}}
										</td>
										<td></td>
										<td></td>
										<td class="text-center">
											{{getQuantityOfSeedProduced(totalData.allocated_quantity) ?? '0'}}
										</td>
										<td class="text-center">
											{{getQuantityOfSeedProduced(totalData.left_quantity) ?? '0'}}
										</td>
									</tr>

								</table>
							</div>
						</div>
					</div>

					<ng-template #cropSubmitted>
						<div class="row">
							<div class="col" style="text-align: center;">
								<p><b>Crop Wise Submission has been Done.</b></p>
							</div>
						</div>
					</ng-template>

					<div class="row my-2">
						<div class="col">

							<div class="row" *ngIf="!isCropSubmitted">
								<div class="col">
									<button *ngIf="selectedVerietyDetail; else disableVarietyBtn"
										class="btn submitButtons" type="submit">Variety Wise Submission</button>

									<ng-template #disableVarietyBtn>
										<button class="btn submitButtons disabled" disabled>Variety Wise
											Submission</button>

									</ng-template>

									<button
										*ngIf="tempVerietyListDetails && cropButtonEnable && tempVerietyListDetails.length == 0; else disableCropBtn"
										class="btn submitButtons ml-2" type="button" (click)="cropWiseSubmission()">Crop
										Wise Final Submission</button>

									<ng-template #disableCropBtn>
										<button class="btn submitButtons disabled ml-2" disabled>Crop Wise Final
											Submission</button>

									</ng-template>
								</div>


							</div>

						</div>

					</div>
				</div>

			</div>
		</div>
	</div>
</form>