<form [formGroup]="ngForm">
    <div class="main-inventory row my-4 w-90 py-1">
        <div class="row">
            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 title-inventory pl-0 pt-1 pb-2">
                Inspection Report of Monitoring Team (BSP III)
            </div>

            <!-- first card ui -->
            <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 btn-align">
                <div class="row card-inventory form-group">
                    <!-- start sectio 1 -->
                    <div class="col-12 col-md-10 col-lg-10 col-sm-10 col-xl-10 pt-1">
                        <div class="row ">
                            <!-- year of indent -->
                            <div class="col-12 col-md-4 col-lg-4 col-sm-6 col-xl-4">
                                <div class="row">
                                    <div class="col-12 col-md-12 col-lg-12 col-lg-12 col-xl-12">
                                        <label for="year" class="left-heading required ">Year of Indent</label>
                                    </div>
                                    <div class="col-12 col-md-12 col-lg-12 col-lg-12 col-xl-12 pr-1">
                                        <select class=" form-control input-inventory" formControlName="year">
                                            <option value="">Please Select Year</option>
                                            <option *ngFor="let year of yearData" value="{{year.year}}">
                                                {{ year.year }}-{{ ((year.year % 100) + 1) < 10 ? '0' : '' }}{{
                                                    (year.year % 100) + 1 }} </option>
                                        </select>
                                        <div class=" errorMessage"
                                            *ngIf="submitted || ngForm.controls['year'].invalid && (ngForm.controls['year'].dirty || ngForm.controls['year'].touched)">
                                            <span *ngIf=" ngForm.controls['year'].errors?.['required']">
                                                Please Select Year.
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- season -->
                            <div class="col-12 col-md-4 col-lg-4 col-sm-6 col-xl-4">
                                <div class="row">
                                    <div class="col-12 col-md-12 col-lg-12 col-xl-12">
                                        <label for="year" class="left-heading required">Season</label>
                                    </div>
                                    <div class="col-12 col-md-12 col-lg-12 col-xl-12">
                                        <select class=" form-control input-inventory" formControlName="season">
                                            <option value="">Please Select Season</option>
                                            <option *ngFor="let seasons of seasonData"
                                                value="{{seasons && seasons.season}}">
                                                {{seasons && seasons.season== 'K'? "Kharif": "Rabi" }}
                                            </option>
                                        </select>
                                        <div class=" errorMessage"
                                            *ngIf="submitted || ngForm.controls['season'].invalid && (ngForm.controls['season'].dirty || ngForm.controls['season'].touched)">
                                            <span *ngIf=" ngForm.controls['season'].errors?.['required']">
                                                Please Select Season.
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- crop -->
                            <div class="col-12 col-md-4 col-lg-4 col-sm-6 col-xl-4">
                                <div class="row">
                                    <div class="col-12 col-md-12 col-lg-12 col-xl-12">
                                        <label for="year" class="left-heading required">Crop</label>
                                    </div>
                                    <div class="col-12 col-md-12 col-lg-12 col-xl-12">
                                        <div ngbDropdown class="d-inline-block w-100"
                                            [ngClass]="!ngForm.controls['season'].value ? 'disableButton' : ''">
                                            <button class="btn takeplacholder w-100 crop toggle-button input-inventory"
                                                [disabled]="!ngForm.controls['season'].value" id="crop"
                                                ngbDropdownToggle style="text-align: left;">
                                                {{ selectCrop && (selectCrop.length > 30) ? (selectCrop.substring(0,23)
                                                + '...') : selectCrop ? selectCrop : 'Select Crop' }}
                                            </button>

                                            <div class="dropdown-menu w-100" ngbDropdownMenu="crop"
                                                aria-labelledby="sortMenu">
                                                <input type="text" class="form-control px-4" formControlName="crop_text"
                                                    placeholder="Search Crop">
                                                <button class="dropdown-item" *ngFor="let item of cropData"
                                                    (click)="crop(item)" #dropdownItem [attr.data-parent-name]="'crop'">
                                                    {{ item && item.m_crop.crop_name ? item.m_crop.crop_name : '' }}
                                                </button>
                                            </div>
                                        </div>
                                        <div class="pl-0 toggle-button" ngbDropdown>
                                            <i class="fa-solid fa-angle-down downicon" (click)="cClick()"></i>
                                        </div>
                                        <div class=" errorMessage"
                                            *ngIf="submitted || ngForm.controls['crop'].invalid && (ngForm.controls['crop'].dirty || ngForm.controls['crop'].touched)">
                                            <span *ngIf="ngForm.controls['crop'].errors?.['required']">
                                                Please Select crop Name.
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Download button -->
                    <div class="col-12 col-md-2 col-lg-2 col-sm-6 col-xl-2" style="margin-top: 2rem;">
                        <div class="row">
                            <div class="d-flex align-items-end justify-content-center h-100">
                                <button class="btn btn-inventory search2" style="width: 14rem; color: white;"
                                    (click)="searchData()">Search</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- second card ui -->
            <div class="col-12 col-md-12 col-lg-12 col-xl-12" *ngIf=" isSearchClicked">
                <div class="row card-inventory form-group">
                    <div class="col-12 col-md-4 col-lg-4 col-sm-6 col-xl-3 pt-2">
                        <div class="row">
                            <div class="col-12 col-md-12 col-lg-12 col-lg-12 col-xl-12">
                                <label for="variety" class="left-heading">Variety</label>
                            </div>
                            <div class="col-12 col-md-12 col-lg-12 col-lg-12 col-xl-12">
                                <!-- <div ngbDropdown class="d-inline-block w-100"
                                    [ngClass]="!ngForm.controls['crop'].value ? 'disableButton' : ''">
                                    <button class="btn takeplacholder w-100 variety_name toggle-button input-inventory"
                                        [disabled]="!ngForm.controls['crop'].value" id="variety_name" ngbDropdownToggle
                                        style="text-align: left;">
                                        {{ selectVariety && (selectVariety.length > 30) ? (selectVariety.substring(0,23)
                                        + '...') : selectVariety ? selectVariety : 'Select Variety' }}
                                    </button>

                                    <div class="dropdown-menu w-100" ngbDropdownMenu="variety_name"
                                        aria-labelledby="sortMenu">
                                        <input type="text" class="form-control px-4" formControlName="variety_text"
                                            placeholder="Search Variety...">
                                        <button class="dropdown-item" *ngFor="let item of varietyData"
                                            (click)="variety(item)" #dropdownItem
                                            [attr.data-parent-name]="'variety_name'">
                                            {{ item && item.m_crop_variety.variety_name ?
                                            item.m_crop_variety.variety_name : '' }}
                                        </button>
                                    </div>
                                </div> -->
                                <!-- <div class="pl-0 toggle-button" ngbDropdown>
                                    <i class="fa-solid fa-angle-down downicon" (click)="vClick()"></i>
                                </div> -->

                                <ng-multiselect-dropdown [settings]="dropdownSettings" [data]="varietyData"
                                    formControlName="variety" [placeholder]="'Select Variety'" class="dropdown"
                                    (onSelect)="getPageData()" (onDeSelect)="getPageData()"
                                    (onSelectAll)="selcetAll($event)"
                                    (onDeSelectAll)="getPageData()"></ng-multiselect-dropdown>
                                <!-- <div class="errorMessage"
                                    *ngIf="submitted || ngForm.controls['variety'].invalid && (ngForm.controls['variety'].dirty || ngForm.controls['variety'].touched)">
                                    <span *ngIf="ngForm.controls['variety'].errors?.['required']">
                                        Please Select Variety.
                                    </span>
                                </div> -->
                            </div>
                        </div>
                    </div>

                    <div class="col-12 col-md-4 col-lg-4 col-sm-6 col-xl-3 pt-2"></div>
                    <div class="col-12 col-md-4 col-lg-4 col-sm-6 col-xl-3 pt-2"></div>

                    <div class="col-12 col-md-4 col-lg-4 col-sm-6 col-xl-3 pt-2" style="margin-top: 2rem;">
                        <button (click)="getreportAllDataPdfData();" *ngIf="allInspected" class="pdflogo"><i
                                class="fas fa-file-pdf" style="font-size:30px;color:red"
                                title="Download Consolidated Report"></i>
                        </button>
                    </div>

                    <div class="col-12 col-md-12 col-lg-12 col-sm-12 col-xl-12 pt-2" style="font-size: 5px;">
                        <div class="list-wrapper">
                            <div class="row d-none d-md-flex data-row-header">
                                <div class="col-12 col-sm-1 col-md-1 col-lg-1 py-2 d-flex verticle-content-middle">
                                    S.No.</div>
                                <div class="col-12 col-sm-1 col-md-1 col-lg-1 py-2 d-flex verticle-content-middle">
                                    Crop Details</div>
                                <div class="col-12 col-sm-3 col-md-3 col-lg-3 py-2 d-flex verticle-content-middle">
                                    Land Details</div>
                                <div class="col-12 col-sm-3 col-md-3 col-lg-3 py-2 d-flex verticle-content-middle">
                                    Inspection Details </div>
                                <div class="col-12 col-sm-2 col-md-2 col-lg-2 py-2 d-flex verticle-content-middle">
                                    Monitoring Report
                                </div>
                                <div
                                    class="col-12 col-sm-2 col-md-2 col-lg-2 py-2 d-flex verticle-content-middle justify-content-center">
                                    Action
                                </div>
                            </div>
                            <div>
                                <div *ngFor="let data of filterPaginateSearch.itemList; let dataIndex= index"
                                    class="row data-row">
                                    <div class="col-12 col-sm-1 col-md-1 col-lg-1 py-1 d-flex verticle-content-middle">
                                        <div class="w-fit-content">
                                            <label class="d-md-none"><b>Crop</b>&nbsp;</label>
                                            <span>
                                                {{dataIndex + 1}}
                                            </span>
                                        </div>
                                    </div>
                                    <div class="col-12 col-sm-1 col-md-1 col-lg-1 py-1 d-flex verticle-content-middle">
                                        <div class="w-fit-content">
                                            <label class="d-md-none"><b>Variety</b>&nbsp;</label>
                                            <span>
                                                <td style="font-weight: 500;">
                                                    <span>Variety: <b class="font-weight-bold">{{data &&
                                                            data.m_crop_variety
                                                            && data.m_crop_variety.variety_name ?
                                                            data.m_crop_variety.variety_name : '--'}}</b>
                                                    </span><br>
                                                    <span *ngIf="data && data.variety_line_code">Parental Line: <b
                                                            class="font-weight-bold">{{data && data.m_variety_lines[0]
                                                            &&
                                                            data.m_variety_lines[0].line_variety_name ?
                                                            data.m_variety_lines[0].line_variety_name : ''}}</b>
                                                    </span>
                                                </td>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="col-12 col-sm-3 col-md-3 col-lg-3 py-1 d-flex verticle-content-middle">
                                        <div class="w-fit-content">
                                            <label class="d-md-none" class="d-md-none"><b>Variety</b>&nbsp;</label>
                                            <span>
                                                <td style="font-weight: 500;">
                                                    <span>Plot Code: <b
                                                            class="font-weight-bold">{{data.bspProforma2.field_code ?
                                                            data.bspProforma2.field_code : '--'}}</b></span><br>
                                                    <span>Address: <b
                                                            class="font-weight-bold">{{data.bspProforma2.address ?
                                                            data.bspProforma2.address : '--'}}</b></span><br>
                                                    <span>District: <b
                                                            class="font-weight-bold">{{data.bspProforma2.m_district.district_name
                                                            ? data.bspProforma2.m_district.district_name :
                                                            '--'}}</b></span><br>
                                                    <span>State: <b
                                                            class="font-weight-bold">{{data.bspProforma2.m_state.state_name
                                                            ? data.bspProforma2.m_state.state_name :
                                                            '--'}}</b></span><br>
                                                    <span>Area (Ha): <b
                                                            class="font-weight-bold">{{data.bspProforma2.area_shown ?
                                                            data.bspProforma2.area_shown : '--'}}</b></span><br>
                                                    <span>Expected Production ({{ getquantityUnit(data.variety_code)
                                                        }}): <b
                                                            class="font-weight-bold">{{data.bspProforma2.expected_production
                                                            ? data.bspProforma2.expected_production :
                                                            '--'}}</b></span><br>
                                                </td>
                                            </span>
                                        </div>
                                    </div>
                                    <ng-container
                                        *ngIf=" data && data.reinspection_data[0] && data.reinspection_data[0].report.toLowerCase() != data.report.toLowerCase()">
                                        <div *ngFor="let reinspection of data.reinspection_data"
                                            class="row  col-12 col-sm-7 col-md-7 col-lg-7" style="border: none;">
                                            <div
                                                class="col-12 col-sm-5 col-md-5 col-lg-5 py-1 d-flex verticle-content-middle">
                                                <div class="w-fit-content">
                                                    <label class="d-md-none"><b>Variety Notification
                                                            Year:</b>&nbsp;</label>
                                                    <span style="cursor: pointer; word-break: break-word;"
                                                        data-toggle="tooltip" data-placement="bottom" title="">
                                                        <td style="font-weight: 500;">
                                                            <span>Date of Inspection: <b class="font-weight-bold">{{data
                                                                    &&
                                                                    data.reinspection_data[0] &&
                                                                    data.reinspection_data[0].inspection_date ?
                                                                    formatedDate(data.reinspection_data[0].inspection_date):'--'}}</b></span><br>
                                                            <span>Inspected Area (Ha): <b
                                                                    class="font-weight-bold">{{data &&
                                                                    data.reinspection_data[0] &&
                                                                    data.reinspection_data[0].inspected_area ?
                                                                    data.reinspection_data[0].inspected_area :
                                                                    '--'}}</b></span><br>
                                                            <span>Crop Condition: <b class="font-weight-bold">{{data &&
                                                                    data.reinspection_data[0] &&
                                                                    data.reinspection_data[0].crop_condition?
                                                                    data.reinspection_data[0].crop_condition :
                                                                    '--'}}</b></span><br>
                                                            <span>Estimated Production ({{
                                                                getquantityUnit(data.variety_code) }}): <b
                                                                    class="font-weight-bold">
                                                                    {{ (data && data.reinspection_data[0] &&
                                                                    data.reinspection_data[0].estimated_production &&
                                                                    data.reinspection_data[0].estimated_production !==
                                                                    'undefined') ?
                                                                    data && data.reinspection_data[0] &&
                                                                    data.reinspection_data[0].estimated_production :
                                                                    (data && data.reinspection_data[0] &&
                                                                    data.reinspection_data[0].report ===
                                                                    'unsatisfactory'
                                                                    || data && data.reinspection_data[0] &&
                                                                    data.reinspection_data[0].report === 'Re-monitoring
                                                                    after 15 days') ? 'NA' : '--' }}
                                                                </b></span><br>
                                                            <!-- {{data.estimated_production ? data.estimated_production : '--'}} -->
                                                            <span>Tentative Date of Harvesting: <b
                                                                    class="font-weight-bold">{{formatDateRange(data &&
                                                                    data.reinspection_data[0] &&
                                                                    data.reinspection_data[0].date_of_harvesting,data &&
                                                                    data.reinspection_data[0] &&
                                                                    data.reinspection_data[0].harv_to_date)}}</b></span><br>
                                                        </td>
                                                    </span>
                                                </div>
                                            </div>
                                            <div
                                                class="col-12 col-sm-4 col-md-4 col-lg-4 py-1 d-flex verticle-content-middle">
                                                <div class="w-fit-content">
                                                    <label class="d-md-none"><b>State:</b>&nbsp;</label>
                                                    <span style="cursor: pointer; word-break: break-word;"
                                                        data-toggle="tooltip" data-placement="bottom" title="">
                                                        <td style="font-weight: 500;">
                                                            <span>Report: <b class="font-weight-bold">{{ data &&
                                                                    data.reinspection_data[0] &&
                                                                    data.reinspection_data[0].report ?
                                                                    capitalizeFirstLetter(data.reinspection_data[0].report)
                                                                    : "--" }}</b></span><br>
                                                            <span>Reason: <b class="font-weight-bold"> {{ data &&
                                                                    data.reinspection_data[0] &&
                                                                    data.reinspection_data[0].report === 'satisfactory'
                                                                    ?
                                                                    'NA' : data && data.reinspection_data[0] &&
                                                                    data.reinspection_data[0].report !==
                                                                    'satisfactory' ? data && data.reinspection_data[0]
                                                                    &&
                                                                    data.reinspection_data[0].reason : ''
                                                                    }}
                                                                </b></span><br>
                                                        </td>
                                                    </span>
                                                </div>
                                            </div>
                                            <div
                                                class="col-12 col-sm-3 col-md-3 col-lg-3 py-1 d-flex verticle-content-middle justify-content-md-center phone_view_btn">
                                                <div
                                                    class="list-action-buttons-wrapper w-fit-content phone_view_action_btn pl-md-3 pl-lg-0 pl-xl-3 pl-sm-0">
                                                    <button type="submit"
                                                        class="form-button search2 d-inline-flex justify-content-center verticle-content-middle mt-3"
                                                        (click)="getreportData(data, true)"
                                                        [ngClass]="{'disableButton': !data.bspProforma2.is_inspected}"
                                                        [disabled]="!data.bspProforma2.is_inspected">
                                                        Download Report </button>
                                                </div>
                                            </div>
                                        </div>
                                    </ng-container>
                                    <div class="col-12 col-sm-5 col-md-5 col-lg-5 py-1 d-flex verticle-content-middle"
                                        *ngIf=" data && data.reinspection_data[0] && data.reinspection_data[0].report.toLowerCase() != data.report.toLowerCase()">
                                    </div>
                                    <div class="col-12 col-sm-3 col-md-3 col-lg-3 py-1 d-flex verticle-content-middle"
                                        style="margin-right: -18px !important;">
                                        <div class="w-fit-content">
                                            <label class="d-md-none"><b>Variety Notification
                                                    Year:</b>&nbsp;</label>
                                            <span style="cursor: pointer; word-break: break-word;" data-toggle="tooltip"
                                                data-placement="bottom" title="">
                                                <td style="font-weight: 500;">
                                                    <span>Date of Inspection: <b class="font-weight-bold">{{data
                                                            &&
                                                            data.inspection_date ?
                                                            formatedDate(data.inspection_date):'--'}}</b></span><br>
                                                    <span>Inspected Area (Ha): <b
                                                            class="font-weight-bold">{{data.inspected_area ?
                                                            data.inspected_area : '--'}}</b></span><br>
                                                    <span>Crop Condition: <b
                                                            class="font-weight-bold">{{data.crop_condition
                                                            ?
                                                            data.crop_condition : '--'}}</b></span><br>
                                                    <span>Estimated Production ({{
                                                        getquantityUnit(data.variety_code)
                                                        }}): <b class="font-weight-bold">
                                                            {{ (data.estimated_production &&
                                                            data.estimated_production
                                                            !== 'undefined') ? data.estimated_production :
                                                            (data.report
                                                            === 'unsatisfactory' || data.report ===
                                                            'Re-monitoring after
                                                            15 days') ? 'NA' : '--' }}
                                                        </b></span><br>
                                                    <!-- {{data.estimated_production ? data.estimated_production : '--'}} -->
                                                    <span>Tentative Date of Harvesting <b class="font-weight-bold">{{
                                                            data && data.bspProforma2 &&
                                                            data.bspProforma2.is_inspected
                                                            == false ?
                                                            '--' : formatDateRange(data.date_of_harvesting,
                                                            data.harv_to_date) }}</b></span><br>
                                                </td>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="col-12 col-sm-2 col-md-2 col-lg-2 py-1 d-flex verticle-content-middle">
                                        <div class="w-fit-content">
                                            <label class="d-md-none"><b>State:</b>&nbsp;</label>
                                            <span style="cursor: pointer; word-break: break-word;" data-toggle="tooltip"
                                                data-placement="bottom" title="">
                                                <td style="font-weight: 500;">
                                                    <span>Report: <b class="font-weight-bold">{{ data &&
                                                            data.report ?
                                                            capitalizeFirstLetter(data.report) : "--"
                                                            }}</b></span><br>
                                                    <span>Reason: <b class="font-weight-bold"> {{ data &&
                                                            data.report
                                                            === 'satisfactory' ? 'NA' : data.report !==
                                                            'satisfactory' ?
                                                            data.reason : '' }}
                                                        </b></span><br>
                                                </td>
                                            </span>
                                        </div>
                                    </div>
                                    <div
                                        class="col-12 col-sm-2 col-md-2 col-lg-2 py-1 d-flex verticle-content-middle justify-content-md-center phone_view_btn">
                                        <div
                                            class="list-action-buttons-wrapper w-fit-content phone_view_action_btn pl-md-3 pl-lg-0 pl-xl-3 pl-sm-0">
                                            <button type="submit"
                                                class="form-button search2 d-inline-flex justify-content-center verticle-content-middle mt-3"
                                                (click)="getreportData(data,false)"
                                                [ngClass]="{'disableButton': !data.bspProforma2.is_inspected}"
                                                [disabled]="!data.bspProforma2.is_inspected">
                                                Download Report </button>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <!-- <div *ngIf="(filterPaginateSearch && filterPaginateSearch.initialized &&(!filterPaginateSearch.itemList) || filterPaginateSearch.itemList.length < 1)"
                            class="px-2 py-3 w-100" style="height: 50px;">
                            <div class="d-flex verticle-content-middle justify-content-center w-100"
                                style="font-size: 17px;">
                                No Data Found.
                            </div>
                        </div> -->
                    </div>
                    <div class="col-12 col-md-12 col-lg-12 px-4 px-md-3 py-1 pb-4 pl-4">
                        <app-pagination-ui></app-pagination-ui>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>
<!-- <div *ngIf="isReportDownload"> {{isReportDownload}} {{isReportDownloadSecond}}
    {{responseData.length}}
    <div *ngFor="let data of responseData">
        <app-bsp-third-report></app-bsp-third-report>
    </div>
    <div *ngIf="isReportDownloadSecond"> {{isReportDownload}} {{isReportDownloadSecond}}
        <div>
            <app-bsp-third-report></app-bsp-third-report>
        </div>
    </div> -->

<div class="row my-4 w-100 d-none">
    <div class="col-12 d-flex justify-content-center verticle-content-middle" id="yourPdfContentId">
        <div class="main-content-form-wrapper px-0 py-2">
            <div class="row">
                <div class="w-100">
                    <form [formGroup]="ngForm">
                        <div>
                            <div class="px-3" *ngFor="let data of responseData;let i =index">

                                <div class="container col-md-12 col-lg-12 col-xl-12 mt-5 ">
                                    <div class="col-md-12 col-lg-12 col-xl-12 pb-3">
                                        <div class="col-md-6 col-lg-6 col-xl-6 float-left">
                                            <img src="{{ data && data.agencyDetails && data.agencyDetails.image_url ? (data.agencyDetails.image_url) : '/assets/images/no_logo.png' }}"
                                                style="height:8rem;">
                                        </div>
                                        <div class="col-md-6 col-lg-6 col-xl-6 float-right ">
                                            <div style="float: right;">
                                                <qrcode [qrdata]="baseUrl+ 'inspection-report/'+ data.encryptedDataId"
                                                    [allowEmptyString]="true"
                                                    [ariaLabel]="'QR Code image with the following content...'"
                                                    [cssClass]="'top'" [colorDark]="'#000000ff'"
                                                    [colorLight]="'#FFFFFF'" [elementType]="'canvas'"
                                                    [errorCorrectionLevel]="'M'" [imageSrc]="" [imageHeight]="80"
                                                    [imageWidth]="80" [margin]="2" [scale]="1"
                                                    [title]="'A custom title attribute'" [width]="140">
                                                </qrcode>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12 col-sm-12   d-flex justify-content-center ">
                                                <span class="heading_notofied heading1"
                                                    style="white-space: nowrap;">{{data && data.agencyDetails &&
                                                    data.agencyDetails.agency_name ?
                                                    data.agencyDetails.agency_name : '--'}}</span>
                                            </div>

                                            <div class="col-md-12 col-sm-12  d-flex justify-content-center addresshead">
                                                <span class="heading_notofied heading1">{{data && data.agencyDetails &&
                                                    data.agencyDetails.district_name ? data.agencyDetails.district_name
                                                    :'--'}}, &nbsp;{{data && data.agencyDetails &&
                                                    data.agencyDetails.state_name ? data.agencyDetails.state_name
                                                    :'--'}}</span>
                                            </div>

                                            <div class="col-md-12 col-sm-12   d-flex justify-content-center pt-4">
                                                <span class="heading_notofied heading1"
                                                    style="white-space: nowrap;">"Inspection
                                                    Report of the Monitoring
                                                    Team (BSP-III)"</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <hr style="border:1px solid #228B22" class="">
                                <div class="row">
                                    <div class="col-4 col-md-4 col-lg-6 py-3 d-flex verticle-content-middle pl-5 heading_notofied"
                                        style="font-size: 15px!important;"><b>Name of Production Center : </b>
                                        {{data && data.agencyDetails &&
                                        data.agencyDetails.agency_name ?
                                        data.agencyDetails.agency_name : '--'}}
                                    </div>
                                    <div class="col-4 col-md-4 col-lg-6 py-3 text-right float-right heading_notofied dateClass pl-0"
                                        style="font-size: 15px!important;margin-left:-1em;"><b>Year of Indent :
                                        </b>&nbsp;
                                        {{ ngForm.controls['season'].value=="K"?"Kharif":"Rabi"}}, 
                                        {{ (ngForm.controls['year'].value)}}-{{(ngForm.controls['year'].value-2000)+1}}
                                        <!-- {{getFormattedSeason(data &&
                                        data.season ?
                                        data.season
                                        :'')}},{{data && data.year ? data.year + '-' + (data.year +
                                        1).toString().slice(-2) : '--'}} -->
                                    </div>
                                </div>



                                <div class="row">
                                    <div class="col-2 col-lg-4 col-md-2   d-flex verticle-content-middle  heading_notofied pl-5 pl-xl-5"
                                        style="font-size: 15px!important;"><b>Date of Monitoring :
                                        </b>&nbsp;{{formatedDate(data &&
                                        data.inspection_date ? data.inspection_date: '')}}
                                    </div>
                                    <div class="col-2 col-lg-4 col-md-2   d-flex verticle-content-middle justify-content-center  heading_notofied "
                                        style="font-size: 15px!important;text-align:center">
                                        <b>Crop : </b>&nbsp;{{data && data.m_crop &&
                                        data.m_crop.crop_name ?
                                        data.m_crop.crop_name :
                                        '--'}}
                                    </div>
                                    <div class="col-2 col-lg-4 col-md-2  text-right heading_notofied refclass pl-0"
                                        style="font-size: 15px!important;margin-left:-1em;">
                                        <b>Reference Number : </b>&nbsp;{{data && data.report_ref_no ?
                                        data.report_ref_no :
                                        '--'}}

                                    </div>
                                </div>

                                <div class="col-12 px-2">
                                    <div class="list-wrapper px-2 py-3">
                                        <div class="middle_line"></div>
                                        <div class="row data-row">
                                            <table class="table table-bordered table-responsive"
                                                style="text-align: center;">
                                                <thead>
                                                    <tr class="headingofpdftable">
                                                        <th scope="col" class=" py-2 datalist "
                                                            style="white-space: nowrap;">Variety <span
                                                                *ngIf="data && data.variety_line_code"><br> (Parental
                                                                Line)</span></th>
                                                        <th scope="col" class=" py-2 datalist "
                                                            style="white-space: nowrap;">Address</th>
                                                        <th scope="col" class=" py-2 datalist "
                                                            style="white-space: nowrap;">Area <br> (Ha)</th>
                                                        <th scope="col" class=" py-2 datalist "
                                                            style="white-space: nowrap;">Date of <br> Sowing</th>
                                                        <th scope="col" class=" py-2 datalist "
                                                            style="white-space: nowrap;">Expected Harvest <br> Date</th>
                                                        <th scope="col" class=" py-2 datalist "
                                                            style="white-space: nowrap;">Expected <br> Production ({{
                                                            getquantityUnit(data.variety_code) }})</th>
                                                        <th scope="col" class=" py-2 datalist "
                                                            style="white-space: nowrap;">Date of <br> BSP I</th>
                                                        <th scope="col" class=" py-2 datalist "
                                                            style="white-space: nowrap;">Date of <br> BSP II</th>
                                                        <th scope="col" class=" py-2 datalist "
                                                            style="white-space: nowrap;">Area <br> Inspected(Ha)</th>
                                                        <th scope="col" class=" py-2 datalist "
                                                            style="white-space: nowrap;">Crop <br> Condition</th>
                                                        <th scope="col" class=" py-2 datalist "
                                                            style="white-space: nowrap;">Report of <br> Monitoring Team
                                                        </th>
                                                        <th scope="col" class=" py-2 datalist "
                                                            style="white-space: nowrap;">Reason for <br> Dissatisfaction
                                                        </th>
                                                        <th scope="col" class=" py-2 datalist "
                                                            style="white-space: nowrap;">Estimated Date of <br>
                                                            Harvesting</th>
                                                        <th scope="col" class=" py-2 datalist "
                                                            style="white-space: nowrap;">Estimated <br> Production ({{
                                                            getquantityUnit(data.variety_code) }})</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>
                                                            <span> {{ data && data.m_crop_variety &&
                                                                data.m_crop_variety.variety_name ?
                                                                data.m_crop_variety.variety_name : "NA" }}
                                                            </span>
                                                            <span *ngIf="data && data.variety_line_code">
                                                                ({{data && data.m_variety_lines[0] &&
                                                                data.m_variety_lines[0].line_variety_name ?
                                                                data.m_variety_lines[0].line_variety_name : 'NA'}})
                                                            </span>
                                                        </td>
                                                        <td>
                                                            {{
                                                            (data && data.bspProforma2?.address ?
                                                            data.bspProforma2.address + ', ' : '')
                                                            +
                                                            (data && data.bspProforma2.m_district.district_name ?
                                                            data.bspProforma2.m_district.district_name + ', ' :
                                                            '')+
                                                            (data && data.bspProforma2.m_state?.state_name ?
                                                            data.bspProforma2.m_state.state_name : '')
                                                            }}
                                                        </td>
                                                        <!-- <td>
                                                                <ng-container *ngIf="data && data.length > 0">
                                                                    <div *ngFor="let item of data">
                                                                        {{ item.bspProforma2?.address ? item.bspProforma2.address + ', ' :
                                                                        '' }}
                                                                        {{ item.bspProforma2?.m_state?.state_name ?
                                                                        item.bspProforma2.m_state.state_name + ', ' : '' }}
                                                                        {{ item.bspProforma2?.m_district?.district_name ?
                                                                        item.bspProforma2.m_district.district_name : '' }}
                                                                    </div>
                                                                </ng-container>
                                                            </td> -->
                                                        <td>{{ data && data.bspProforma2.area_shown ?
                                                            data.bspProforma2.area_shown :
                                                            "NA" }}
                                                        </td>
                                                        <td> {{formatedDate(data && data.bspProforma2 &&
                                                            data.bspProforma2.date_of_showing ?
                                                            data.bspProforma2.date_of_showing : '')}} </td>
                                                        <td>{{formatDateRange(data.bspProforma2.expected_harvest_from,
                                                            data.bspProforma2.expected_harvest_to)}}</td>
                                                        <td>{{ data && data.bspProforma2.expected_production ?
                                                            data.bspProforma2.expected_production : "NA" }}
                                                        </td>
                                                        <td>{{formatedDate(data && data.bspProforma2 &&
                                                            data.bspProforma2.created_at_bsp1
                                                            ?
                                                            data.bspProforma2.created_at_bsp1
                                                            : '')}}
                                                        </td>
                                                        <td>{{formatedDate(data && data.bspProforma2 &&
                                                            data.bspProforma2.created_at ?
                                                            data.bspProforma2.created_at : '')}} </td>
                                                        <td>{{ data && data.inspected_area ? data.inspected_area :
                                                            "NA" }}</td>
                                                        <td>{{ data && data.crop_condition ? data.crop_condition :
                                                            "NA" }}</td>
                                                        <td>{{ data && data.report ?
                                                            capitalizeFirstLetter(data.report) : "NA" }}</td>
                                                        <td>{{ data && data.report === 'satisfactory' ? 'NA' :
                                                            data.report !== 'satisfactory' ? data.reason : '' }}
                                                        </td>
                                                        <td>{{formatDateRange(data.date_of_harvesting,data.harv_to_date)}}
                                                        </td>
                                                        <td>{{data && data.estimated_production?
                                                            data.estimated_production : "NA" }}
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>






                                <ng-container>

                                    <div class="grid-container px-2">
                                        <ng-container *ngFor="let memberDetails of data.monitoringTeam; let i = index">
                                            <div class="grid-item"
                                                *ngIf="getReturnData(memberDetails,data.isRemonitorData) || data.reinspection_data.length == 0">

                                                <ng-container>

                                                    <span class="d-flex justify-content-center">-SD-</span>
                                                    <p class="d-flex justify-content-center mb-0">({{memberDetails
                                                        &&
                                                        memberDetails.monitoringMember &&
                                                        memberDetails.monitoringMember.name ?
                                                        memberDetails.monitoringMember.name
                                                        : ''}})</p>
                                                    <p class="d-flex justify-content-center mb-0">{{memberDetails &&
                                                        memberDetails.monitoringMember &&
                                                        memberDetails.monitoringMember.m_designation &&
                                                        memberDetails.monitoringMember.m_designation.name ?
                                                        memberDetails.monitoringMember.m_designation.name :
                                                        ''}},{{memberDetails &&
                                                        memberDetails.monitoringMember &&
                                                        memberDetails.monitoringMember.agency_type &&
                                                        memberDetails.monitoringMember.agency_type.name ?
                                                        memberDetails.monitoringMember.agency_type.name : ''}}</p>
                                                    <p class="d-flex justify-content-center mb-0">{{memberDetails &&
                                                        memberDetails.monitoringMember &&
                                                        memberDetails.monitoringMember.m_district &&
                                                        memberDetails.monitoringMember.m_district.district_name ?
                                                        memberDetails.monitoringMember.m_district.district_name :
                                                        ''}},{{memberDetails
                                                        && memberDetails.monitoringMember &&
                                                        memberDetails.monitoringMember.m_state &&
                                                        memberDetails.monitoringMember.m_state.state_name ?
                                                        memberDetails.monitoringMember.m_state.state_name : ''}}
                                                    </p>

                                                </ng-container>
                                            </div>

                                            <!-- Add more items if needed -->
                                        </ng-container>
                                    </div>

                                </ng-container>
                                <footer>
                                    <p style="padding-bottom: 72px; font-size: 12px; padding-left: 1.5rem;">THIS IS
                                        A DIGITAL COPY. SIGNATURE IS NOT REQUIRED.</p>
                                </footer>
                                <div *ngIf="i != responseData.length-1" id="page-break1"
                                    style="page-break-after: always;"></div>



                                <!-- </div>

                                <div class="col-md-12 mt-5"
                                    *ngIf="data && data.monitoringTeam && !data.isRemonitorData">
                                    <div class="row">
                                        <div class="col-md-1"></div>
                                        <ng-container *ngFor="let memberDetails of data.monitoringTeam; let i = index">
                                            <div *ngIf="memberDetails.is_active == 1">
                                                <div class="col-md-1" *ngIf="i % 5 === 0 && i > 0"></div>
                                                <div class="col-md-1" *ngIf="i % 5 === 0 && i > 0"></div>

                                                <div class="col-md-2 text-center">
                                                    <div class="col-md-12 col-lg-12 col-xl-12 mb-5">
                                                        <span class="d-flex justify-content-center">-SD-</span>
                                                        <p class="d-flex justify-content-center mb-0">({{memberDetails
                                                            &&
                                                            memberDetails.monitoringMember &&
                                                            memberDetails.monitoringMember.name ?
                                                            memberDetails.monitoringMember.name
                                                            : ''}})</p>
                                                        <p class="d-flex justify-content-center mb-0">{{memberDetails &&
                                                            memberDetails.monitoringMember &&
                                                            memberDetails.monitoringMember.m_designation &&
                                                            memberDetails.monitoringMember.m_designation.name ?
                                                            memberDetails.monitoringMember.m_designation.name :
                                                            ''}},{{memberDetails &&
                                                            memberDetails.monitoringMember &&
                                                            memberDetails.monitoringMember.agency_type &&
                                                            memberDetails.monitoringMember.agency_type.name ?
                                                            memberDetails.monitoringMember.agency_type.name : ''}}</p>
                                                        <p class="d-flex justify-content-center mb-0">{{memberDetails &&
                                                            memberDetails.monitoringMember &&
                                                            memberDetails.monitoringMember.m_district &&
                                                            memberDetails.monitoringMember.m_district.district_name ?
                                                            memberDetails.monitoringMember.m_district.district_name :
                                                            ''}},{{memberDetails
                                                            && memberDetails.monitoringMember &&
                                                            memberDetails.monitoringMember.m_state &&
                                                            memberDetails.monitoringMember.m_state.state_name ?
                                                            memberDetails.monitoringMember.m_state.state_name : ''}}
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-container>
                                        <div class="col-md-1"></div>
                                    </div>

                                    <footer>
                                        <p style="padding-bottom: 72px; font-size: 12px; padding-left: 1.5rem;">THIS IS
                                            A DIGITAL COPY. SIGNATURE IS NOT REQUIRED.</p>
                                    </footer>
                                </div> -->
                            </div>

                        </div>
                    </form>
                </div>
                <div>
                </div>
            </div>
        </div>
    </div>
</div>